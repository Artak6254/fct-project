datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model category {
  id    String @id @default(auto()) @map("_id") @db.ObjectId
  name  String
  slug  String
  foods food[]
}

model food {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  name       String
  price      Int
  image      String
  categoryId String   @db.ObjectId
  category   category @relation(fields: [categoryId], references: [id])
  orderId    String?  @db.ObjectId
  order      order?   @relation(fields: [orderId], references: [id])
}

model customer {
  id       String    @id @default(auto()) @map("_id") @db.ObjectId
  name     String
  email    String
  address  String?
  phone    String
  bookings booking[]
}

model booking {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  date       DateTime
  hour       Int
  num_person Int
  status     String   @default("pending")
  customerId String   @db.ObjectId
  customer   customer @relation(fields: [customerId], references: [id])
}

model order {
  id        String @id @default(auto()) @map("_id") @db.ObjectId
  bookingId String @db.ObjectId
  foods     food[]
}

model admin {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  username String @unique
  password String
}

//Esto es para prueba 
// model reservation {
//   id          String @id @default(auto()) @map("_id") @db.ObjectId
//   dateTime    DateTime
//   numPersons  Int
//   name        String
//   phone       String
//   email       String
//   address     String?
//   createdAt   DateTime @default(now())
//   updatedAt   DateTime @updatedAt
// }
